# RAG-System Datenbank Performance Report

**Generiert am:** 10.12.2025 um 15:27:40

---

Dieser Report dokumentiert die Ergebnisse der Performance-Tests für das RAG-System.
Die Tests validieren die architektonischen Entscheidungen und prüfen die Einhaltung
der definierten SLOs (Service Level Objectives).

**Referenz:** Kursmaterialien Modul 2, 4, 7, 8

## Zusammenfassung

| Metrik | Wert |
|--------|------|
| Anzahl Tests | 21 |
| Getestete Datenbanken | MongoDB, Redis, Vector Search |
| Gesamtoperationen | 134,306 |
| Fehler | 0 |
| SLO-Tests | 0/7 bestanden |

### Vollständiges Ranking (nach Ops/s)

| Rang | Test | Datenbank | Typ | Ops/s | P95 (ms) |
|------|------|-----------|-----|-------|----------|
| 1 | Redis Pipeline GET | Redis | sync | 115,454 | 0.01 |
| 2 | Redis Pipeline SET | Redis | sync | 85,600 | 0.01 |
| 3 | MongoDB Bulk insert_many | MongoDB | sync | 34,269 | 0.04 |
| 4 | Redis MGET | Redis | sync | 20,182 | 0.05 |
| 5 | MongoDB Batch find ($in) | MongoDB | sync | 7,721 | 0.20 |
| 6 | Redis Async GET | Redis | async | 6,649 | 2.13 |
| 7 | Redis Async SET | Redis | async | 6,135 | 2.31 |
| 8 | MongoDB Async insert_one | MongoDB | async | 2,590 | 5.89 |
| 9 | MongoDB Async find_one | MongoDB | async | 2,495 | 6.20 |
| 10 | Redis Naive GET | Redis | sync | 2,135 | 0.67 |
| 11 | Redis Naive SET | Redis | sync | 2,105 | 0.69 |
| 12 | MongoDB Single find_one | MongoDB | sync | 1,021 | 1.42 |
| 13 | MongoDB Single insert_one | MongoDB | sync | 1,007 | 1.46 |
| 14 | MongoDB Filtered find | MongoDB | sync | 420 | 2.72 |
| 15 | pgvector-Manual Filtered ANN | Vector Search | sync | 20 | 60.00 |
| 16 | pgvector-Manual ANN (HNSW) | Vector Search | sync | 19 | 60.14 |
| 17 | pgvector-Native ANN (HNSW) | Vector Search | sync | 19 | 60.10 |
| 18 | pgvector-Native Filtered ANN | Vector Search | sync | 19 | 60.06 |
| 19 | pgvector-Manual KNN (exakt) | Vector Search | sync | 6 | 181.38 |
| 20 | pgvector-Native KNN (exakt) | Vector Search | sync | 6 | 185.28 |
| 21 | MongoDB Vector Search | Vector Search | sync | 0 | 9662.16 |

## Systemkonfiguration

| Parameter | Wert |
|-----------|------|
| Betriebssystem | Windows 10 |
| Python-Version | 3.12.10 |
| Prozessor | AMD64 Family 23 Model 113 Stepping 0, AuthenticAMD |
| Docker | Docker version 29.1.2, build 890dcca |

**Hinweis:** Da die Tests lokal in Docker-Containern laufen, ist der
Netzwerk-Overhead minimal. In einer produktiven Umgebung können die
Latenzen höher sein.

## Detaillierte Ergebnisse

### MongoDB

#### Lese-Operationen (Read)

| Test | Operationen | Dauer (ms) | Ops/s | Mean (ms) | P95 (ms) | P99 (ms) |
|------|-------------|------------|-------|-----------|----------|----------|
| MongoDB Single find_one | 10,000 | 9,794.3 | 1,021 | 0.98 | 1.42 | 1.76 |
| MongoDB Batch find ($in) | 10,000 | 1,295.1 | 7,721 | 0.13 | 0.20 | 0.25 |
| MongoDB Filtered find | 6 | 14.3 | 420 | 2.38 | 2.72 | 2.76 |
| MongoDB Async find_one (async) | 10,000 | 4,008.5 | 2,495 | 3.97 | 6.20 | 8.11 |

#### Schreib-Operationen (Write)

| Test | Operationen | Dauer (ms) | Ops/s | Mean (ms) | P95 (ms) | P99 (ms) |
|------|-------------|------------|-------|-----------|----------|----------|
| MongoDB Single insert_one | 10,000 | 9,931.9 | 1,007 | 0.99 | 1.46 | 1.91 |
| MongoDB Bulk insert_many | 10,000 | 291.8 | 34,269 | 0.03 | 0.04 | 0.04 |
| MongoDB Async insert_one (async) | 10,000 | 3,861.2 | 2,590 | 3.83 | 5.89 | 7.40 |

### Redis

#### Lese-Operationen (Read)

| Test | Operationen | Dauer (ms) | Ops/s | Mean (ms) | P95 (ms) | P99 (ms) |
|------|-------------|------------|-------|-----------|----------|----------|
| Redis Naive GET | 10,000 | 4,684.9 | 2,135 | 0.47 | 0.67 | 0.86 |
| Redis Pipeline GET | 10,000 | 86.6 | 115,454 | 0.01 | 0.01 | 0.01 |
| Redis MGET | 10,000 | 495.5 | 20,182 | 0.05 | 0.05 | 0.05 |
| Redis Async GET (async) | 10,000 | 1,503.9 | 6,649 | 1.50 | 2.13 | 2.78 |

#### Schreib-Operationen (Write)

| Test | Operationen | Dauer (ms) | Ops/s | Mean (ms) | P95 (ms) | P99 (ms) |
|------|-------------|------------|-------|-----------|----------|----------|
| Redis Naive SET | 10,000 | 4,751.5 | 2,105 | 0.47 | 0.69 | 0.93 |
| Redis Pipeline SET | 10,000 | 116.8 | 85,600 | 0.01 | 0.01 | 0.01 |
| Redis Async SET (async) | 10,000 | 1,630.1 | 6,135 | 1.62 | 2.31 | 3.08 |

### Vector Search

#### Vektorsuche

| Test | Operationen | Dauer (ms) | Ops/s | Mean (ms) | P95 (ms) | P99 (ms) |
|------|-------------|------------|-------|-----------|----------|----------|
| pgvector-Native KNN (exakt) | 100 | 15,935.4 | 6 | 159.35 | 185.28 | 213.63 |
| pgvector-Native ANN (HNSW) | 1,000 | 51,422.6 | 19 | 51.42 | 60.10 | 60.64 |
| pgvector-Native Filtered ANN | 1,000 | 51,507.0 | 19 | 51.51 | 60.06 | 60.26 |
| pgvector-Manual KNN (exakt) | 100 | 15,754.0 | 6 | 157.54 | 181.38 | 202.17 |
| pgvector-Manual ANN (HNSW) | 1,000 | 51,345.7 | 19 | 51.35 | 60.14 | 60.68 |
| pgvector-Manual Filtered ANN | 1,000 | 51,227.3 | 20 | 51.23 | 60.00 | 60.26 |
| MongoDB Vector Search | 100 | 922,188.4 | 0 | 9221.88 | 9662.16 | 9964.19 |

## Vergleiche

### Redis: Naive SET vs. Pipeline SET

| Metrik | Verbesserungsfaktor |
|--------|---------------------|
| Geschwindigkeit | 40.7x schneller |
| Ops/s | 40.7x mehr |
| P95 Latenz | 55.3x besser |
| P99 Latenz | 74.4x besser |

**Baseline:** Redis Naive SET  
**Optimiert:** Redis Pipeline SET

### MongoDB: Single vs. Bulk Insert

| Metrik | Verbesserungsfaktor |
|--------|---------------------|
| Geschwindigkeit | 34.0x schneller |
| Ops/s | 34.0x mehr |
| P95 Latenz | 34.6x besser |
| P99 Latenz | 45.2x besser |

**Baseline:** MongoDB Single insert_one  
**Optimiert:** MongoDB Bulk insert_many

### pgvector: KNN (exakt) vs. ANN (HNSW)

| Metrik | Verbesserungsfaktor |
|--------|---------------------|
| Geschwindigkeit | 0.3x schneller |
| Ops/s | 3.1x mehr |
| P95 Latenz | 3.1x besser |
| P99 Latenz | 3.5x besser |

**Baseline:** pgvector-Native KNN (exakt)  
**Optimiert:** pgvector-Native ANN (HNSW)

## SLO-Analyse (Service Level Objectives)

Die folgenden Tests wurden gegen definierte Latenz-Ziele geprüft.
Gemäß Modul 7 ist das kritische Budget für die Vektorsuche ≤50ms (P95).

| Test | Ziel (ms) | P95 (ms) | Status |
|------|-----------|----------|--------|
| pgvector-Native KNN (exakt) | 50 | 185.28 | ❌ Nicht bestanden |
| pgvector-Native ANN (HNSW) | 50 | 60.10 | ❌ Nicht bestanden |
| pgvector-Native Filtered ANN | 50 | 60.06 | ❌ Nicht bestanden |
| pgvector-Manual KNN (exakt) | 50 | 181.38 | ❌ Nicht bestanden |
| pgvector-Manual ANN (HNSW) | 50 | 60.14 | ❌ Nicht bestanden |
| pgvector-Manual Filtered ANN | 50 | 60.00 | ❌ Nicht bestanden |
| MongoDB Vector Search | 50 | 9662.16 | ❌ Nicht bestanden |

## Anmerkungen

- postgres: Fehler - 

---

## Gemessene Erkenntnisse

Die folgenden Aussagen basieren **ausschließlich auf den durchgeführten Tests**:

- **Redis Pipeline SET** war **40.7x schneller** als Redis Naive SET (gemessen: 40.7x mehr Ops/s).
- **MongoDB Bulk insert_many** war **34.0x schneller** als MongoDB Single insert_one (gemessen: 34.0x mehr Ops/s).
- ⚠️ **pgvector-Native KNN (exakt)** hat das SLO von 50ms NICHT eingehalten (P95: 185.28ms).
- ⚠️ **pgvector-Native ANN (HNSW)** hat das SLO von 50ms NICHT eingehalten (P95: 60.10ms).
- ⚠️ **pgvector-Native Filtered ANN** hat das SLO von 50ms NICHT eingehalten (P95: 60.06ms).
- ⚠️ **pgvector-Manual KNN (exakt)** hat das SLO von 50ms NICHT eingehalten (P95: 181.38ms).
- ⚠️ **pgvector-Manual ANN (HNSW)** hat das SLO von 50ms NICHT eingehalten (P95: 60.14ms).
- ⚠️ **pgvector-Manual Filtered ANN** hat das SLO von 50ms NICHT eingehalten (P95: 60.00ms).
- ⚠️ **MongoDB Vector Search** hat das SLO von 50ms NICHT eingehalten (P95: 9662.16ms).

---

*Report generiert von RAG Performance Test Suite*  
*Hinweis: Alle Schlussfolgerungen sind empirisch aus diesem Testlauf abgeleitet.*