# =============================================================================
# RAG-System Datenbank Performance Tests - Konfigurationsdatei
# =============================================================================
# Diese Datei enthält alle konfigurierbaren Parameter für die Performance-Tests.
# Änderungen hier beeinflussen das Testverhalten, ohne den Code anzupassen.
# =============================================================================

# -----------------------------------------------------------------------------
# Allgemeine Test-Parameter
# -----------------------------------------------------------------------------
general:
  # Anzahl der Operationen für Write/Read-Tests (z.B. 10.000 INSERTs)
  num_operations: 10000
  
  # Anzahl der Vektoren für Vektor-Suche-Tests
  vector_count: 50000
  
  # Dimensionen der Embedding-Vektoren (768 = Standard für viele Modelle)
  vector_dimensions: 768
  
  # Batch-Größe für Bulk-Operationen
  batch_size: 1000
  
  # Anzahl paralleler Clients für Async-Tests
  concurrent_clients: 10
  
  # Warmup-Operationen vor der eigentlichen Messung (stabilisiert Connection-Pools)
  warmup_operations: 100

# -----------------------------------------------------------------------------
# Docker Compose Konfiguration
# -----------------------------------------------------------------------------
docker:
  # Pfad zur Docker Compose Datei (relativ zum tests/ Ordner)
  compose_file: "docker/docker-compose.yml"
  
  # Wartezeit in Sekunden nach Container-Start (DB-Initialisierung)
  startup_wait_seconds: 15
  
  # Timeout für Docker-Operationen in Sekunden
  # Erhöht auf 180s für langsamere Container-Starts (z.B. bei kaltem Docker-Cache)
  timeout_seconds: 180

# -----------------------------------------------------------------------------
# Datenbank-Verbindungen
# -----------------------------------------------------------------------------
databases:
  redis:
    host: "localhost"
    port: 6379
    # Kein Passwort für lokale Tests
    password: null
    # Datenbank-Index (0-15)
    db: 0
  
  mongodb:
    host: "localhost"
    port: 27017
    database: "rag_performance_test"
    # Collection für Chunk-Dokumente
    collection: "chunks"
    # Für lokale Tests ohne Authentifizierung
    username: null
    password: null
  
  mongodb_vector:
    # Community Image mit Vector Search Support
    host: "localhost"
    port: 27018
    database: "rag_vector_test"
    collection: "embeddings"
  
  postgres:
    host: "localhost"
    port: 5432
    database: "rag_performance_test"
    user: "postgres"
    password: "postgres"
  
  # PostgreSQL mit nativem pgvector-Image
  postgres_pgvector_native:
    host: "localhost"
    port: 5433
    database: "rag_vector_test"
    user: "postgres"
    password: "postgres"
  
  # PostgreSQL mit manueller pgvector-Installation
  postgres_pgvector_manual:
    host: "localhost"
    port: 5434
    database: "rag_vector_test"
    user: "postgres"
    password: "postgres"

# -----------------------------------------------------------------------------
# Test-Szenarien Konfiguration
# -----------------------------------------------------------------------------
scenarios:
  # Szenario A: Write Performance
  write_tests:
    enabled: true
    # Teste naive (einzelne) Operationen
    test_naive: true
    # Teste Batch/Pipeline Operationen
    test_batch: true
  
  # Szenario B: Read Performance
  read_tests:
    enabled: true
    # Anzahl der Lesevorgänge
    num_reads: 10000
    # IDs für Batch-Reads (z.B. 10 Chunks auf einmal)
    batch_read_size: 10
  
  # Szenario C: Vector Search
  vector_tests:
    enabled: true
    # Anzahl der Such-Queries
    num_searches: 1000
    # Top-K Ergebnisse pro Suche
    top_k: 5
    # Teste KNN (exakte Suche)
    test_knn: true
    # Teste ANN (approximative Suche mit HNSW)
    test_ann: true
    # Teste Metadaten-Filterung
    test_filtered: true
    # Kategorien für Filterung
    filter_categories: ["category_a", "category_b", "category_c"]

# -----------------------------------------------------------------------------
# Reporting Konfiguration
# -----------------------------------------------------------------------------
reporting:
  # Ausgabeverzeichnis für Reports (relativ zum tests/ Ordner)
  output_dir: "reports"
  
  # Dateinamens-Muster ({timestamp} wird ersetzt)
  filename_pattern: "report_{timestamp}.md"
  
  # Zeitstempel-Format
  timestamp_format: "%Y-%m-%d_%H-%M-%S"
  
  # Zusätzliche System-Informationen im Report
  include_system_info: true

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
logging:
  # Log-Level: DEBUG, INFO, WARNING, ERROR
  level: "INFO"
  
  # Logs in Datei schreiben
  file_logging: true
  
  # Ausgabeverzeichnis für Logs (relativ zum tests/ Ordner)
  output_dir: "logs"
  
  # Dateinamens-Muster ({timestamp} wird ersetzt)
  filename_pattern: "log_{timestamp}.log"
