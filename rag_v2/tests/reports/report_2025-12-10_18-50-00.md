# RAG-System Datenbank Performance Report

**Generiert am:** 10.12.2025 um 18:50:00

---

Dieser Report dokumentiert die Ergebnisse der Performance-Tests für das RAG-System.
Die Tests validieren die architektonischen Entscheidungen und prüfen die Einhaltung
der definierten SLOs (Service Level Objectives).

**Referenz:** Kursmaterialien Modul 2, 4, 7, 8

## Zusammenfassung

| Metrik | Wert |
|--------|------|
| Anzahl Tests | 21 |
| Getestete Datenbanken | MongoDB, Redis, Vector Search |
| Gesamtoperationen | 134,306 |
| Fehler | 0 |
| SLO-Tests | 0/7 bestanden |

### Vollständiges Ranking (nach Ops/s)

| Rang | Test | Datenbank | Typ | Ops/s | P95 (ms) |
|------|------|-----------|-----|-------|----------|
| 1 | Redis Pipeline GET | Redis | sync | 170,540 | 0.01 |
| 2 | Redis Pipeline SET | Redis | sync | 89,519 | 0.02 |
| 3 | MongoDB Bulk insert_many | MongoDB | sync | 47,128 | 0.03 |
| 4 | Redis MGET | Redis | sync | 19,872 | 0.05 |
| 5 | Redis Async GET | Redis | async | 11,926 | 1.28 |
| 6 | Redis Async SET | Redis | async | 9,602 | 1.44 |
| 7 | MongoDB Batch find ($in) | MongoDB | sync | 6,538 | 0.21 |
| 8 | Redis Naive GET | Redis | sync | 3,607 | 0.42 |
| 9 | Redis Naive SET | Redis | sync | 3,556 | 0.59 |
| 10 | MongoDB Async insert_one | MongoDB | async | 2,815 | 4.91 |
| 11 | MongoDB Async find_one | MongoDB | async | 1,553 | 10.91 |
| 12 | MongoDB Single find_one | MongoDB | sync | 826 | 2.03 |
| 13 | MongoDB Single insert_one | MongoDB | sync | 662 | 2.15 |
| 14 | MongoDB Filtered find | MongoDB | sync | 276 | 6.82 |
| 15 | pgvector-Manual Filtered ANN | Vector Search | sync | 20 | 59.93 |
| 16 | pgvector-Native Filtered ANN | Vector Search | sync | 20 | 59.96 |
| 17 | pgvector-Native ANN (HNSW) | Vector Search | sync | 19 | 61.02 |
| 18 | pgvector-Manual ANN (HNSW) | Vector Search | sync | 18 | 61.26 |
| 19 | pgvector-Manual KNN (exakt) | Vector Search | sync | 10 | 111.52 |
| 20 | pgvector-Native KNN (exakt) | Vector Search | sync | 9 | 130.05 |
| 21 | MongoDB Vector Search | Vector Search | sync | 0 | 6560.46 |

## Systemkonfiguration

| Parameter | Wert |
|-----------|------|
| Betriebssystem | Windows 11 |
| Python-Version | 3.12.10 |
| Prozessor | Intel64 Family 6 Model 186 Stepping 2, GenuineIntel |
| Docker | Docker version 29.1.2, build 890dcca |

**Hinweis:** Da die Tests lokal in Docker-Containern laufen, ist der
Netzwerk-Overhead minimal. In einer produktiven Umgebung können die
Latenzen höher sein.

## Detaillierte Ergebnisse

### MongoDB

#### Lese-Operationen (Read)

| Test | Operationen | Dauer (ms) | Ops/s | Mean (ms) | P95 (ms) | P99 (ms) |
|------|-------------|------------|-------|-----------|----------|----------|
| MongoDB Single find_one | 10,000 | 12,099.4 | 826 | 1.21 | 2.03 | 2.89 |
| MongoDB Batch find ($in) | 10,000 | 1,529.6 | 6,538 | 0.15 | 0.21 | 0.87 |
| MongoDB Filtered find | 6 | 21.7 | 276 | 3.62 | 6.82 | 7.44 |
| MongoDB Async find_one (async) | 10,000 | 6,439.9 | 1,553 | 6.43 | 10.91 | 96.34 |

#### Schreib-Operationen (Write)

| Test | Operationen | Dauer (ms) | Ops/s | Mean (ms) | P95 (ms) | P99 (ms) |
|------|-------------|------------|-------|-----------|----------|----------|
| MongoDB Single insert_one | 10,000 | 15,106.8 | 662 | 1.51 | 2.15 | 5.52 |
| MongoDB Bulk insert_many | 10,000 | 212.2 | 47,128 | 0.02 | 0.03 | 0.03 |
| MongoDB Async insert_one (async) | 10,000 | 3,552.6 | 2,815 | 3.53 | 4.91 | 26.08 |

### Redis

#### Lese-Operationen (Read)

| Test | Operationen | Dauer (ms) | Ops/s | Mean (ms) | P95 (ms) | P99 (ms) |
|------|-------------|------------|-------|-----------|----------|----------|
| Redis Naive GET | 10,000 | 2,772.1 | 3,607 | 0.28 | 0.42 | 0.60 |
| Redis Pipeline GET | 10,000 | 58.6 | 170,540 | 0.01 | 0.01 | 0.01 |
| Redis MGET | 10,000 | 503.2 | 19,872 | 0.05 | 0.05 | 0.05 |
| Redis Async GET (async) | 10,000 | 838.5 | 11,926 | 0.83 | 1.28 | 1.67 |

#### Schreib-Operationen (Write)

| Test | Operationen | Dauer (ms) | Ops/s | Mean (ms) | P95 (ms) | P99 (ms) |
|------|-------------|------------|-------|-----------|----------|----------|
| Redis Naive SET | 10,000 | 2,812.5 | 3,556 | 0.28 | 0.59 | 0.78 |
| Redis Pipeline SET | 10,000 | 111.7 | 89,519 | 0.01 | 0.02 | 0.02 |
| Redis Async SET (async) | 10,000 | 1,041.4 | 9,602 | 1.04 | 1.44 | 2.42 |

### Vector Search

#### Vektorsuche

| Test | Operationen | Dauer (ms) | Ops/s | Mean (ms) | P95 (ms) | P99 (ms) |
|------|-------------|------------|-------|-----------|----------|----------|
| pgvector-Native KNN (exakt) | 100 | 11,040.9 | 9 | 110.41 | 130.05 | 139.65 |
| pgvector-Native ANN (HNSW) | 1,000 | 53,603.8 | 19 | 53.60 | 61.02 | 66.33 |
| pgvector-Native Filtered ANN | 1,000 | 50,990.2 | 20 | 50.99 | 59.96 | 61.15 |
| pgvector-Manual KNN (exakt) | 100 | 10,056.5 | 10 | 100.57 | 111.52 | 133.38 |
| pgvector-Manual ANN (HNSW) | 1,000 | 54,084.5 | 18 | 54.08 | 61.26 | 67.34 |
| pgvector-Manual Filtered ANN | 1,000 | 50,918.8 | 20 | 50.92 | 59.93 | 60.68 |
| MongoDB Vector Search | 100 | 629,407.6 | 0 | 6294.08 | 6560.46 | 6649.50 |

## Vergleiche

### Redis: Naive SET vs. Pipeline SET

| Metrik | Verbesserungsfaktor |
|--------|---------------------|
| Geschwindigkeit | 25.2x schneller |
| Ops/s | 25.2x mehr |
| P95 Latenz | 26.1x besser |
| P99 Latenz | 34.4x besser |

**Baseline:** Redis Naive SET  
**Optimiert:** Redis Pipeline SET

### MongoDB: Single vs. Bulk Insert

| Metrik | Verbesserungsfaktor |
|--------|---------------------|
| Geschwindigkeit | 71.2x schneller |
| Ops/s | 71.2x mehr |
| P95 Latenz | 64.4x besser |
| P99 Latenz | 164.9x besser |

**Baseline:** MongoDB Single insert_one  
**Optimiert:** MongoDB Bulk insert_many

### pgvector: KNN (exakt) vs. ANN (HNSW)

| Metrik | Verbesserungsfaktor |
|--------|---------------------|
| Geschwindigkeit | 0.2x schneller |
| Ops/s | 2.1x mehr |
| P95 Latenz | 2.1x besser |
| P99 Latenz | 2.1x besser |

**Baseline:** pgvector-Native KNN (exakt)  
**Optimiert:** pgvector-Native ANN (HNSW)

## SLO-Analyse (Service Level Objectives)

Die folgenden Tests wurden gegen definierte Latenz-Ziele geprüft.
Gemäß Modul 7 ist das kritische Budget für die Vektorsuche ≤50ms (P95).

| Test | Ziel (ms) | P95 (ms) | Status |
|------|-----------|----------|--------|
| pgvector-Native KNN (exakt) | 50 | 130.05 | ❌ Nicht bestanden |
| pgvector-Native ANN (HNSW) | 50 | 61.02 | ❌ Nicht bestanden |
| pgvector-Native Filtered ANN | 50 | 59.96 | ❌ Nicht bestanden |
| pgvector-Manual KNN (exakt) | 50 | 111.52 | ❌ Nicht bestanden |
| pgvector-Manual ANN (HNSW) | 50 | 61.26 | ❌ Nicht bestanden |
| pgvector-Manual Filtered ANN | 50 | 59.93 | ❌ Nicht bestanden |
| MongoDB Vector Search | 50 | 6560.46 | ❌ Nicht bestanden |

## Anmerkungen

- postgres: Fehler - 

---

## Gemessene Erkenntnisse

Die folgenden Aussagen basieren **ausschließlich auf den durchgeführten Tests**:

- **Redis Pipeline SET** war **25.2x schneller** als Redis Naive SET (gemessen: 25.2x mehr Ops/s).
- **MongoDB Bulk insert_many** war **71.2x schneller** als MongoDB Single insert_one (gemessen: 71.2x mehr Ops/s).
- ⚠️ **pgvector-Native KNN (exakt)** hat das SLO von 50ms NICHT eingehalten (P95: 130.05ms).
- ⚠️ **pgvector-Native ANN (HNSW)** hat das SLO von 50ms NICHT eingehalten (P95: 61.02ms).
- ⚠️ **pgvector-Native Filtered ANN** hat das SLO von 50ms NICHT eingehalten (P95: 59.96ms).
- ⚠️ **pgvector-Manual KNN (exakt)** hat das SLO von 50ms NICHT eingehalten (P95: 111.52ms).
- ⚠️ **pgvector-Manual ANN (HNSW)** hat das SLO von 50ms NICHT eingehalten (P95: 61.26ms).
- ⚠️ **pgvector-Manual Filtered ANN** hat das SLO von 50ms NICHT eingehalten (P95: 59.93ms).
- ⚠️ **MongoDB Vector Search** hat das SLO von 50ms NICHT eingehalten (P95: 6560.46ms).

---

*Report generiert von RAG Performance Test Suite*  
*Hinweis: Alle Schlussfolgerungen sind empirisch aus diesem Testlauf abgeleitet.*