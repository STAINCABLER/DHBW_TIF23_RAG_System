# RAG-System Datenbank Performance Report

**Generiert am:** 13.12.2025 um 16:06:45

---

Dieser Report dokumentiert die Ergebnisse der Performance-Tests für das RAG-System.
Die Tests validieren die architektonischen Entscheidungen und prüfen die Einhaltung
der definierten SLOs (Service Level Objectives).

**Referenz:** Kursmaterialien Modul 2, 4, 7, 8

## Zusammenfassung

| Metrik | Wert |
|--------|------|
| Anzahl Tests | 21 |
| Getestete Datenbanken | MongoDB, Redis, Vector Search |
| Gesamtoperationen | 134,306 |
| Fehler | 0 |
| SLO-Tests | 0/7 bestanden |

### Vollständiges Ranking (nach Ops/s)

| Rang | Test | Datenbank | Typ | Ops/s | P95 (ms) |
|------|------|-----------|-----|-------|----------|
| 1 | Redis Pipeline GET | Redis | sync | 90,955 | 0.01 |
| 2 | Redis Pipeline SET | Redis | sync | 62,810 | 0.02 |
| 3 | MongoDB Bulk insert_many | MongoDB | sync | 37,208 | 0.04 |
| 4 | Redis MGET | Redis | sync | 18,814 | 0.06 |
| 5 | MongoDB Batch find ($in) | MongoDB | sync | 7,636 | 0.19 |
| 6 | Redis Async GET | Redis | async | 6,005 | 2.69 |
| 7 | Redis Async SET | Redis | async | 5,829 | 2.35 |
| 8 | MongoDB Async insert_one | MongoDB | async | 2,537 | 5.99 |
| 9 | MongoDB Async find_one | MongoDB | async | 2,364 | 6.53 |
| 10 | Redis Naive GET | Redis | sync | 2,258 | 0.60 |
| 11 | Redis Naive SET | Redis | sync | 2,062 | 0.66 |
| 12 | MongoDB Single insert_one | MongoDB | sync | 1,022 | 1.38 |
| 13 | MongoDB Single find_one | MongoDB | sync | 1,008 | 1.41 |
| 14 | MongoDB Filtered find | MongoDB | sync | 256 | 5.89 |
| 15 | pgvector-Manual Filtered ANN | Vector Search | sync | 19 | 60.02 |
| 16 | pgvector-Native ANN (HNSW) | Vector Search | sync | 19 | 60.07 |
| 17 | pgvector-Manual ANN (HNSW) | Vector Search | sync | 19 | 60.27 |
| 18 | pgvector-Native Filtered ANN | Vector Search | sync | 19 | 60.05 |
| 19 | pgvector-Native KNN (exakt) | Vector Search | sync | 6 | 220.28 |
| 20 | pgvector-Manual KNN (exakt) | Vector Search | sync | 6 | 211.54 |
| 21 | MongoDB Vector Search | Vector Search | sync | 0 | 10652.04 |

## Systemkonfiguration

| Parameter | Wert |
|-----------|------|
| Betriebssystem | Windows 10 |
| Python-Version | 3.12.10 |
| Prozessor | AMD64 Family 23 Model 113 Stepping 0, AuthenticAMD |
| Docker | Docker version 29.1.2, build 890dcca |

**Hinweis:** Da die Tests lokal in Docker-Containern laufen, ist der
Netzwerk-Overhead minimal. In einer produktiven Umgebung können die
Latenzen höher sein.

## Detaillierte Ergebnisse

### MongoDB

#### Lese-Operationen (Read)

| Test | Operationen | Dauer (ms) | Ops/s | Mean (ms) | P95 (ms) | P99 (ms) |
|------|-------------|------------|-------|-----------|----------|----------|
| MongoDB Single find_one | 10,000 | 9,917.0 | 1,008 | 0.99 | 1.41 | 1.86 |
| MongoDB Batch find ($in) | 10,000 | 1,309.7 | 7,636 | 0.13 | 0.19 | 0.39 |
| MongoDB Filtered find | 6 | 23.5 | 256 | 3.91 | 5.89 | 6.21 |
| MongoDB Async find_one (async) | 10,000 | 4,230.4 | 2,364 | 4.22 | 6.53 | 8.72 |

#### Schreib-Operationen (Write)

| Test | Operationen | Dauer (ms) | Ops/s | Mean (ms) | P95 (ms) | P99 (ms) |
|------|-------------|------------|-------|-----------|----------|----------|
| MongoDB Single insert_one | 10,000 | 9,788.2 | 1,022 | 0.97 | 1.38 | 1.70 |
| MongoDB Bulk insert_many | 10,000 | 268.8 | 37,208 | 0.03 | 0.04 | 0.04 |
| MongoDB Async insert_one (async) | 10,000 | 3,941.0 | 2,537 | 3.91 | 5.99 | 7.62 |

### Redis

#### Lese-Operationen (Read)

| Test | Operationen | Dauer (ms) | Ops/s | Mean (ms) | P95 (ms) | P99 (ms) |
|------|-------------|------------|-------|-----------|----------|----------|
| Redis Naive GET | 10,000 | 4,428.8 | 2,258 | 0.44 | 0.60 | 0.77 |
| Redis Pipeline GET | 10,000 | 109.9 | 90,955 | 0.01 | 0.01 | 0.01 |
| Redis MGET | 10,000 | 531.5 | 18,814 | 0.05 | 0.06 | 0.06 |
| Redis Async GET (async) | 10,000 | 1,665.3 | 6,005 | 1.66 | 2.69 | 4.39 |

#### Schreib-Operationen (Write)

| Test | Operationen | Dauer (ms) | Ops/s | Mean (ms) | P95 (ms) | P99 (ms) |
|------|-------------|------------|-------|-----------|----------|----------|
| Redis Naive SET | 10,000 | 4,849.9 | 2,062 | 0.48 | 0.66 | 0.82 |
| Redis Pipeline SET | 10,000 | 159.2 | 62,810 | 0.02 | 0.02 | 0.02 |
| Redis Async SET (async) | 10,000 | 1,715.6 | 5,829 | 1.71 | 2.35 | 5.48 |

### Vector Search

#### Vektorsuche

| Test | Operationen | Dauer (ms) | Ops/s | Mean (ms) | P95 (ms) | P99 (ms) |
|------|-------------|------------|-------|-----------|----------|----------|
| pgvector-Native KNN (exakt) | 100 | 17,044.0 | 6 | 170.44 | 220.28 | 283.65 |
| pgvector-Native ANN (HNSW) | 1,000 | 51,349.5 | 19 | 51.35 | 60.07 | 60.64 |
| pgvector-Native Filtered ANN | 1,000 | 51,432.5 | 19 | 51.43 | 60.05 | 60.32 |
| pgvector-Manual KNN (exakt) | 100 | 17,056.7 | 6 | 170.57 | 211.54 | 228.24 |
| pgvector-Manual ANN (HNSW) | 1,000 | 51,405.8 | 19 | 51.41 | 60.27 | 61.04 |
| pgvector-Manual Filtered ANN | 1,000 | 51,302.1 | 19 | 51.30 | 60.02 | 60.26 |
| MongoDB Vector Search | 100 | 983,064.6 | 0 | 9830.65 | 10652.04 | 11007.95 |

## Vergleiche

### Redis: Naive SET vs. Pipeline SET

| Metrik | Verbesserungsfaktor |
|--------|---------------------|
| Geschwindigkeit | 30.5x schneller |
| Ops/s | 30.5x mehr |
| P95 Latenz | 30.9x besser |
| P99 Latenz | 38.8x besser |

**Baseline:** Redis Naive SET  
**Optimiert:** Redis Pipeline SET

### MongoDB: Single vs. Bulk Insert

| Metrik | Verbesserungsfaktor |
|--------|---------------------|
| Geschwindigkeit | 36.4x schneller |
| Ops/s | 36.4x mehr |
| P95 Latenz | 36.9x besser |
| P99 Latenz | 45.5x besser |

**Baseline:** MongoDB Single insert_one  
**Optimiert:** MongoDB Bulk insert_many

### pgvector: KNN (exakt) vs. ANN (HNSW)

| Metrik | Verbesserungsfaktor |
|--------|---------------------|
| Geschwindigkeit | 0.3x schneller |
| Ops/s | 3.3x mehr |
| P95 Latenz | 3.7x besser |
| P99 Latenz | 4.7x besser |

**Baseline:** pgvector-Native KNN (exakt)  
**Optimiert:** pgvector-Native ANN (HNSW)

## SLO-Analyse (Service Level Objectives)

Die folgenden Tests wurden gegen definierte Latenz-Ziele geprüft.
Gemäß Modul 7 ist das kritische Budget für die Vektorsuche ≤50ms (P95).

| Test | Ziel (ms) | P95 (ms) | Status |
|------|-----------|----------|--------|
| pgvector-Native KNN (exakt) | 50 | 220.28 | ❌ Nicht bestanden |
| pgvector-Native ANN (HNSW) | 50 | 60.07 | ❌ Nicht bestanden |
| pgvector-Native Filtered ANN | 50 | 60.05 | ❌ Nicht bestanden |
| pgvector-Manual KNN (exakt) | 50 | 211.54 | ❌ Nicht bestanden |
| pgvector-Manual ANN (HNSW) | 50 | 60.27 | ❌ Nicht bestanden |
| pgvector-Manual Filtered ANN | 50 | 60.02 | ❌ Nicht bestanden |
| MongoDB Vector Search | 50 | 10652.04 | ❌ Nicht bestanden |

## Anmerkungen

- postgres: Fehler - 

---

## Gemessene Erkenntnisse

Die folgenden Aussagen basieren **ausschließlich auf den durchgeführten Tests**:

- **Redis Pipeline SET** war **30.5x schneller** als Redis Naive SET (gemessen: 30.5x mehr Ops/s).
- **MongoDB Bulk insert_many** war **36.4x schneller** als MongoDB Single insert_one (gemessen: 36.4x mehr Ops/s).
- ⚠️ **pgvector-Native KNN (exakt)** hat das SLO von 50ms NICHT eingehalten (P95: 220.28ms).
- ⚠️ **pgvector-Native ANN (HNSW)** hat das SLO von 50ms NICHT eingehalten (P95: 60.07ms).
- ⚠️ **pgvector-Native Filtered ANN** hat das SLO von 50ms NICHT eingehalten (P95: 60.05ms).
- ⚠️ **pgvector-Manual KNN (exakt)** hat das SLO von 50ms NICHT eingehalten (P95: 211.54ms).
- ⚠️ **pgvector-Manual ANN (HNSW)** hat das SLO von 50ms NICHT eingehalten (P95: 60.27ms).
- ⚠️ **pgvector-Manual Filtered ANN** hat das SLO von 50ms NICHT eingehalten (P95: 60.02ms).
- ⚠️ **MongoDB Vector Search** hat das SLO von 50ms NICHT eingehalten (P95: 10652.04ms).

---

*Report generiert von RAG Performance Test Suite*  
*Hinweis: Alle Schlussfolgerungen sind empirisch aus diesem Testlauf abgeleitet.*